<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <title>–ê. –Æ–≥–Ω–∞–∫–∏ –º–µ–∫—Ç–µ–±—ñ: “ö–∞–∑–∞“õ —Ç—ñ–ª—ñ —Ç–µ—Å—Ç—ñ</title>
    <style>
        :root {
            --primary: #0984e3;
            --secondary: #74b9ff;
            --accent: #fdcb6e;
            --text-dark: #2d3436;
            --white: #ffffff;
            --danger: #d63031;
            --success: #00b894;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            /* –°—ñ–∑–¥—ñ“£ —Å—É—Ä–µ—Ç—ñ“£—ñ–∑ –æ—Å—ã –∂–µ—Ä–≥–µ “õ–æ–π—ã–ª–∞–¥—ã */
            background: url('C:\Users\jakot\Downloads\bg.jpg') no-repeat center center fixed;
            background-size: cover;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            backdrop-filter: blur(3px); /* –§–æ–Ω–¥—ã —Å”ô–ª –±“±–ª–¥—ã—Ä–∞—Ç—É –º”ô—Ç—ñ–Ω –∂–∞“õ—Å—ã –æ“õ—ã–ª—É—ã “Ø—à—ñ–Ω */
        }

        /* –≠–º–±–ª–µ–º–∞ —Å—Ç–∏–ª—ñ */
        .emblem {
            width: 150px;
            height: 150px;
            background: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto 20px auto;
            border: 5px solid var(--accent);
            box-shadow: 0 0 20px rgba(253, 203, 110, 0.6);
            font-weight: bold;
            color: var(--primary);
            text-align: center;
            font-size: 14px;
            padding: 10px;
        }

        .container {
            background: rgba(255, 255, 255, 0.95); /* –ñ–∞—Ä—Ç—ã–ª–∞–π –º”©–ª–¥—ñ—Ä –∞“õ —Ñ–æ–Ω */
            width: 90%;
            max-width: 800px;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            text-align: center;
            position: relative;
        }

        /* –ë–µ—Ç—Ç–µ—Ä–¥—ñ“£ –∫”©—Ä—ñ–Ω—É—ñ */
        .screen { display: none; animation: fadeIn 0.5s; }
        .active { display: block; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        h1, h2 { color: var(--primary); }
        
        .btn {
            padding: 12px 30px;
            font-size: 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px;
            transition: 0.3s;
            font-weight: bold;
        }
        .btn-primary { background: var(--primary); color: white; }
        .btn-accent { background: var(--accent); color: var(--text-dark); }
        .btn-danger { background: var(--danger); color: white; }
        .btn:hover { transform: scale(1.05); }
        .btn:disabled { background: #b2bec3; cursor: not-allowed; transform: none; }

        input[type="text"] {
            padding: 15px;
            width: 70%;
            border: 2px solid #dfe6e9;
            border-radius: 8px;
            font-size: 18px;
            margin: 20px 0;
            outline: none;
        }
        input[type="text"]:focus { border-color: var(--primary); }

        /* –¢–µ—Å—Ç —Å“±—Ä–∞“õ—Ç–∞—Ä—ã */
        .question-box {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 30px;
            color: var(--text-dark);
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            text-align: left;
        }

        .option-btn {
            background: #f1f2f6;
            border: 2px solid #dfe6e9;
            padding: 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: 0.2s;
            font-size: 16px;
        }
        .option-btn:hover { background: #e0e0e0; }
        .option-btn.selected {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è –±–∞—Ç—ã—Ä–º–∞–ª–∞—Ä—ã */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        /* –ù”ô—Ç–∏–∂–µ —ç–∫—Ä–∞–Ω—ã */
        .score-display { font-size: 50px; color: var(--primary); font-weight: bold; margin: 10px 0; }
        .quote-box {
            background: #ffeaa7;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-style: italic;
            color: #d35400;
            border-left: 5px solid #d35400;
        }
        .mistake-list {
            text-align: left;
            max-height: 300px;
            overflow-y: auto;
            background: #fab1a0;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
        }
        .mistake-item { border-bottom: 1px solid rgba(0,0,0,0.1); padding: 10px 0; }
        
        /* –¢–∏—ã–Ω–¥–∞—Ä */
        .coins-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--accent);
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>

<div class="container">
    <div class="coins-badge">üí∞ –¢–∏—ã–Ω–¥–∞—Ä: <span id="total-coins">0</span></div>

    <div id="intro-screen" class="screen active">
        <div class="emblem">
            <p>–ê. –Æ–ì–ù–ê–ö–ò<br>–ú–ï–ö–¢–ï–ë–Ü</p>
        </div>
        <h1>“ö–æ—à –∫–µ–ª–¥—ñ“£—ñ–∑!</h1>
        <p>–ë“±–ª —Ç–µ—Å—Ç 8-—Å—ã–Ω—ã–ø “ö–∞–∑–∞“õ —Ç—ñ–ª—ñ –ø”ô–Ω—ñ –±–æ–π—ã–Ω—à–∞ –±—ñ–ª—ñ–º—ñ“£—ñ–∑–¥—ñ —Ç–µ–∫—Å–µ—Ä—É–≥–µ –∞—Ä–Ω–∞–ª“ì–∞–Ω.</p>
        <button class="btn btn-primary" onclick="showLogin()">–ñ–∞–ª“ì–∞—Å—Ç—ã—Ä—É ‚ûú</button>
    </div>

    <div id="login-screen" class="screen">
        <h2>–û“õ—É—à—ã–Ω—ã —Ç—ñ—Ä–∫–µ—É</h2>
        <p>–¢–µ—Å—Ç—ñ–ª–µ—É–¥—ñ –±–∞—Å—Ç–∞–º–∞—Å –±“±—Ä—ã–Ω –µ—Å—ñ–º—ñ“£—ñ–∑–¥—ñ –∂–∞–∑—ã“£—ã–∑:</p>
        <input type="text" id="username" placeholder="–ê—Ç—ã-–∂”©–Ω—ñ“£—ñ–∑..." autocomplete="off">
        <br>
        <button class="btn btn-accent" onclick="startGame()">–¢–µ—Å—Ç—Ç—ñ –±–∞—Å—Ç–∞—É ‚ñ∂</button>
    </div>

    <div id="game-screen" class="screen">
        <div style="color: #636e72; margin-bottom: 10px;">–°“±—Ä–∞“õ: <span id="q-number">1</span> / 40</div>
        <div class="question-box" id="q-text">–°“±—Ä–∞“õ –∂“Ø–∫—Ç–µ–ª—É–¥–µ...</div>
        
        <div class="options-grid" id="options-area">
            </div>

        <div class="nav-buttons">
            <button class="btn btn-primary" id="prev-btn" onclick="prevQuestion()" disabled>‚¨Ö –ê—Ä—Ç“õ–∞</button>
            <button class="btn btn-primary" id="next-btn" onclick="nextQuestion()">–ö–µ–ª–µ—Å—ñ ‚û°</button>
            <button class="btn btn-danger" id="finish-btn" onclick="finishTest()" style="display:none;">–ê—è“õ—Ç–∞—É ‚úÖ</button>
        </div>
    </div>

    <div id="result-screen" class="screen">
        <h2 id="result-title">–¢–µ—Å—Ç –∞—è“õ—Ç–∞–ª–¥—ã!</h2>
        <p><span id="player-name"></span>, —Å—ñ–∑–¥—ñ“£ –Ω”ô—Ç–∏–∂–µ“£—ñ–∑:</p>
        <div class="score-display"><span id="score">0</span> / 40</div>
        
        <div id="motivation-msg"></div>
        
        <div id="mistakes-container" style="display: none;">
            <h3>“ö–∞—Ç–µ–º–µ–Ω –∂“±–º—ã—Å:</h3>
            <div class="mistake-list" id="mistakes-list"></div>
        </div>

        <button class="btn btn-primary" onclick="location.reload()">“ö–∞–π—Ç–∞ —Ç–∞–ø—Å—ã—Ä—É ‚Üª</button>
    </div>
</div>

<script>
    // 40 –°“∞–†–ê“ö –ë–ê–ó–ê–°–´ (–°“±—Ä–∞“õ, –ñ–∞—É–∞–ø—Ç–∞—Ä, –î“±—Ä—ã—Å –∂–∞—É–∞–ø—Ç—ã“£ –∏–Ω–¥–µ–∫—Å—ñ)
    // –î“±—Ä—ã—Å –∂–∞—É–∞–ø—Ç—ã“£ –∏–Ω–¥–µ–∫—Å—ñ–Ω (c) ”ô—Ä“õ–∞—à–∞–Ω 0 –¥–µ–ø –±–µ—Ä–µ –±–µ—Ä—ñ“£—ñ–∑, –ø—Ä–æ–≥—Ä–∞–º–º–∞ ”©–∑—ñ –∞—Ä–∞–ª–∞—Å—Ç—ã—Ä–∞–¥—ã.
    const rawQuestions = [
        {q: "–¢“±—Ä–ª–∞—É–ª—ã –º“Ø—à–µ–ª–µ—Ä–¥—ñ –∞—Ç–∞“£—ã–∑:", a: ["–ë–∞—Å—Ç–∞—É—ã—à, –±–∞—è–Ω–¥–∞—É—ã—à", "–ê–Ω—ã“õ—Ç–∞—É—ã—à, –ø—ã—Å—ã“õ—Ç–∞—É—ã—à", "–¢–æ–ª—ã“õ—Ç–∞—É—ã—à", "“ö–∞—Ä—Å—ã–ª—ã“õ—Ç—ã –±–∞“ì—ã–Ω—ã“£“õ—ã"], c: 0},
        {q: "–°”©–π–ª–µ–º–Ω—ñ“£ –Ω–µ–≥—ñ–∑—ñ–Ω –Ω–µ “õ“±—Ä–∞–π–¥—ã?", a: ["–ë–∞—Å—Ç–∞—É—ã—à –ø–µ–Ω –±–∞—è–Ω–¥–∞—É—ã—à", "–ê–Ω—ã“õ—Ç–∞—É—ã—à", "–ü—ã—Å—ã“õ—Ç–∞—É—ã—à", "“ö—ã—Å—Ç—ã—Ä–º–∞ —Å”©–∑"], c: 0},
        {q: "–ü—ã—Å—ã“õ—Ç–∞—É—ã—à—Ç—ã“£ —Å“±—Ä–∞“õ—Ç–∞—Ä—ã–Ω —Ç–∞–±—ã“£—ã–∑:", a: ["“ö–∞–ª–∞–π? “ö–∞—à–∞–Ω? “ö–∞–π–¥–∞?", "–ö—ñ–º? –ù–µ?", "–ö—ñ–º–¥—ñ? –ù–µ–Ω—ñ?", "“ö–∞–Ω–¥–∞–π? “ö–∞–π?"], c: 0},
        {q: "–ö“Ø—Ä–¥–µ–ª—ñ –±–∞—Å—Ç–∞—É—ã—à—Ç—ã —Ç–∞–±—ã“£—ã–∑:", a: ["–ê–±–∞–π “ö“±–Ω–∞–Ω–±–∞–µ–≤ - “±–ª—ã –∞“õ—ã–Ω", "–ú–µ–Ω –∫–µ–ª–¥—ñ–º", "–û–ª –æ“õ—ã–¥—ã", "–ö“Ø–Ω –∂—ã–ª—ã–¥—ã"], c: 0},
        {q: "“ö—ã—Å—Ç—ã—Ä–º–∞ —Å”©–∑–¥—ñ —Ç–∞–±—ã“£—ã–∑:", a: ["–ú–µ–Ω—ñ“£—à–µ", "–ñ”ô–Ω–µ", "–ë—ñ—Ä–∞“õ", "–°–µ–±–µ–±—ñ"], c: 0},
        {q: "–ñ–∞–π —Å”©–π–ª–µ–º–Ω—ñ“£ –Ω–µ—à–µ —Ç“Ø—Ä—ñ –±–∞—Ä?", a: ["4 (–ñ–∞“õ—Ç—ã, –∂–∞“õ—Å—ã–∑, –∞—Ç–∞—É–ª—ã, —Ç–æ–ª—ã–º—Å—ã–∑)", "2", "5", "6"], c: 0},
        {q: "–ê—Ç–∞—É–ª—ã —Å”©–π–ª–µ–º–¥—ñ —Ç–∞–ø:", a: ["–ö“Ø–∑.", "–ú–µ–Ω –±–∞—Ä–∞–º—ã–Ω.", "–ñ–∞“£–±—ã—Ä –∂–∞—É–¥—ã.", "–û–ª –∫–µ–ª–¥—ñ."], c: 0},
        {q: "–ú–∞“õ–∞–ª–¥—ã —Ç–æ–ª—ã“õ—Ç—ã—Ä: '–û“õ—É - ... –±“±–ª–∞“ì—ã'", a: ["–ë—ñ–ª—ñ–º", "”®–Ω–µ—Ä", "–ï“£–±–µ–∫", "–¢”ô—Ä–±–∏–µ"], c: 0},
        {q: "–¢—É—Ä–∞ —Ç–æ–ª—ã“õ—Ç–∞—É—ã—à—Ç—ã“£ –∂–∞–ª“ì–∞—É—ã–Ω —Ç–∞–±—ã“£—ã–∑:", a: ["–¢–∞–±—ã—Å —Å–µ–ø—Ç—ñ–≥—ñ", "–ë–∞—Ä—ã—Å —Å–µ–ø—Ç—ñ–≥—ñ", "–Ü–ª—ñ–∫ —Å–µ–ø—Ç—ñ–≥—ñ", "–ö”©–º–µ–∫—Ç–µ—Å —Å–µ–ø—Ç—ñ–≥—ñ"], c: 0},
        {q: "“ö–∞—Ä–∞—Ç–ø–∞ —Å”©–∑ “õ–∞—Ç—ã—Å“õ–∞–Ω —Å”©–π–ª–µ–º–¥—ñ —Ç–∞–ø:", a: ["–ë–∞–ª–∞–º, –±–µ—Ä—ñ –∫–µ–ª.", "–ö“Ø–Ω —à—ã“õ—Ç—ã.", "–ú–µ–∫—Ç–µ–ø–∫–µ –±–∞—Ä–¥—ã“õ.", "–û–ª –µ—Ä—Ç–µ“£ –∫–µ–ª–µ–¥—ñ."], c: 0},
        {q: "–¢“±—Ä–∞“õ—Ç—ã —Ç—ñ—Ä–∫–µ—Å—Ç—ñ“£ –º–∞“ì—ã–Ω–∞—Å—ã–Ω —Ç–∞–ø: '–¢”©–±–µ—Å—ñ –∫”©–∫–∫–µ –∂–µ—Ç—É'", a: ["“ö—É–∞–Ω—É", "“ö–æ—Ä“õ—É", "–†–µ–Ω–∂—É", "–ë–∏—ñ–∫ –±–æ–ª—É"], c: 0},
        {q: "–û–¥–∞“ì–∞–π —Å”©–∑–¥—ñ —Ç–∞–±—ã“£—ã–∑:", a: ["”ò—Ç—Ç–µ“£", "–ñ”ô–Ω–µ", "–ë—ñ—Ä–∞“õ", "–°–æ–Ω–¥—ã“õ—Ç–∞–Ω"], c: 0},
        {q: "–ú–µ–∑–≥—ñ–ª –ø—ã—Å—ã“õ—Ç–∞—É—ã—à—Ç—ã“£ —Å“±—Ä–∞“ì—ã:", a: ["“ö–∞—à–∞–Ω?", "“ö–∞–π–¥–∞?", "–ù–µ “Ø—à—ñ–Ω?", "“ö–∞–ª–∞–π?"], c: 0},
        {q: "“ö–∞—Ä—Å—ã–ª—ã“õ—Ç—ã –∂–∞–ª“ì–∞—É–ª—ã“õ—Ç—ã —Ç–∞–±—ã“£—ã–∑:", a: ["–ë—ñ—Ä–∞“õ", "–ñ”ô–Ω–µ", "”®–π—Ç–∫–µ–Ω—ñ", "–î–∞, –¥–µ"], c: 0},
        {q: "–ö”©–º–µ–∫—à—ñ –µ—Å—ñ–º–¥—ñ —Ç–∞–±—ã“£—ã–∑:", a: ["“Æ—Å—Ç—ñ", "–ö—ñ—Ç–∞–ø", "–ñ–∞—Å—ã–ª", "–û—Ç—ã—Ä"], c: 0},
        {q: "–ë–∞—è–Ω–¥–∞—É—ã—à—Ç—ã“£ –∞—Å—Ç—ã “õ–∞–ª–∞–π —Å—ã–∑—ã–ª–∞–¥—ã?", a: ["–ï–∫—ñ —Ç“Ø–∑—É", "–ë—ñ—Ä —Ç“Ø–∑—É", "–ò—Ä–µ–∫ —Å—ã–∑—ã“õ", "“Æ–∑—ñ–∫ —Å—ã–∑—ã“õ"], c: 0},
        {q: "–¢—É—ã–Ω–¥—ã —Å—ã–Ω –µ—Å—ñ–º–¥—ñ —Ç–∞–ø:", a: ["–ö”©—Ä—ñ–∫—Ç—ñ", "–ë–∏—ñ–∫", "–ê“õ", "–ö–µ“£"], c: 0},
        {q: "–ñ–∞“õ—Å—ã–∑ —Å”©–π–ª–µ–º–¥—ñ —Ç–∞–±—ã“£—ã–∑:", a: ["–ú–µ–Ω—ñ“£ –±–∞—Ä“ì—ã–º –∫–µ–ª–µ–¥—ñ.", "–ö“Ø–Ω —Å—É—ã—Ç—Ç—ã.", "–û–ª –æ“õ—ã–ø –æ—Ç—ã—Ä.", "–ö“Ø–∑ –∫–µ–ª–¥—ñ."], c: 0},
        {q: "“ö–∞–π—Ç–∞–ª–∞–Ω–±–∞–ª—ã “õ–æ—Å —Å”©–∑–¥—ñ —Ç–∞–ø:", a: ["–ë–∏—ñ–∫-–±–∏—ñ–∫", "–ê—Ç–∞-–∞–Ω–∞", "–ö—ñ—Ç–∞–ø-—Å–∏—Ç–∞–ø", "–ï—Ä—ñ–∫-–∂—ñ–≥–µ—Ä"], c: 0},
        {q: "–°—Ç–∏–ª–∏—Å—Ç–∏–∫–∞ –Ω–µ—à–µ —Ç“Ø—Ä–≥–µ –±”©–ª—ñ–Ω–µ–¥—ñ?", a: ["5", "3", "4", "6"], c: 0},
        {q: "–†–µ—Å–º–∏ —ñ—Å-“õ–∞“ì–∞–∑–¥–∞—Ä —Å—Ç–∏–ª—ñ–Ω–µ –Ω–µ –∂–∞—Ç–∞–¥—ã?", a: ["”®—Ç—ñ–Ω—ñ—à", "”®–ª–µ“£", "”ò“£–≥—ñ–º–µ", "–ú–∞“õ–∞–ª"], c: 0},
        {q: "–ö”©—Ä–∫–µ–º ”ô–¥–µ–±–∏–µ—Ç —Å—Ç–∏–ª—ñ–Ω—ñ“£ –µ—Ä–µ–∫—à–µ–ª—ñ–≥—ñ:", a: ["–û–±—Ä–∞–∑–¥—ã–ª—ã“õ", "–ù–∞“õ—Ç—ã–ª—ã“õ", "–¢–µ—Ä–º–∏–Ω–¥–µ—Ä", "–î”ô–ª–µ–ª–¥—ñ–ª—ñ–∫"], c: 0},
        {q: "–ü—É–±–ª–∏—Ü–∏—Å—Ç–∏–∫–∞–ª—ã“õ —Å—Ç–∏–ª—å “õ–∞–π–¥–∞ “õ–æ–ª–¥–∞–Ω—ã–ª–∞–¥—ã?", a: ["–ì–∞–∑–µ—Ç-–∂—É—Ä–Ω–∞–ª–¥–∞", "“í—ã–ª—ã–º–∏ –µ“£–±–µ–∫—Ç–µ", "–ó–∞“£–¥–∞", "–ö“Ø–Ω–¥–µ–ª—ñ–∫—Ç—ñ ”©–º—ñ—Ä–¥–µ"], c: 0},
        {q: "“í—ã–ª—ã–º–∏ —Å—Ç–∏–ª—å–≥–µ —Ç”ô–Ω —Å”©–∑–¥–µ—Ä:", a: ["–¢–µ—Ä–º–∏–Ω–¥–µ—Ä", "–≠–º–æ—Ü–∏–æ–Ω–∞–ª–¥—ã —Å”©–∑–¥–µ—Ä", "–î–∏–∞–ª–µ–∫—Ç", "–¢“±—Ä–ø–∞–π—ã —Å”©–∑–¥–µ—Ä"], c: 0},
        {q: "–¢”©–ª —Å”©–∑ –¥–µ–≥–µ–Ω—ñ–º—ñ–∑ –Ω–µ?", a: ["–ë—ñ—Ä–µ—É–¥—ñ“£ —Å”©–∑—ñ–Ω—ñ“£ ”©–∑–≥–µ—Ä—ñ—Å—Å—ñ–∑ –±–µ—Ä—ñ–ª—É—ñ", "–ú–∞–∑–º“±–Ω—ã–Ω –∞–π—Ç—É", "–ê–≤—Ç–æ—Ä–¥—ã“£ —Å”©–∑—ñ", "–ñ–∞–Ω–∞–º–∞ —Å”©–∑"], c: 0},
        {q: "–ê–≤—Ç–æ—Ä —Å”©–∑—ñ —Ç”©–ª —Å”©–∑–¥–µ–Ω –∫–µ–π—ñ–Ω –∫–µ–ª—Å–µ “õ–∞–Ω–¥–∞–π —Ç—ã–Ω—ã—Å –±–µ–ª–≥—ñ “õ–æ–π—ã–ª–∞–¥—ã?", a: ["“Æ—Ç—ñ—Ä, —Å—ã–∑—ã“õ—à–∞", "–°—ã–∑—ã“õ—à–∞", "“ö–æ—Å –Ω“Ø–∫—Ç–µ", "–ñ–∞“õ—à–∞"], c: 0},
        {q: "“ö—ã—Å—Ç—ã—Ä–º–∞ —Å”©–∑ —Å”©–π–ª–µ–º–Ω—ñ“£ –±–∞—Å—ã–Ω–¥–∞ –∫–µ–ª—Å–µ:", a: ["”®–∑—ñ–Ω–µ–Ω –∫–µ–π—ñ–Ω “Ø—Ç—ñ—Ä “õ–æ–π—ã–ª–∞–¥—ã", "–ï–∫—ñ –∂–∞“ì—ã–Ω–∞–Ω “Ø—Ç—ñ—Ä", "“Æ—Ç—ñ—Ä “õ–æ–π—ã–ª–º–∞–π–¥—ã", "–°—ã–∑—ã“õ—à–∞ “õ–æ–π—ã–ª–∞–¥—ã"], c: 0},
        {q: "–ë—ñ—Ä—ñ–∫–∫–µ–Ω —Å”©–∑–¥—ñ —Ç–∞–ø:", a: ["–ë“Ø–≥—ñ–Ω", "“ö—ã–∑—ã–ª –∞–ª–∞", "–ê—Ç–∞-–∞–Ω–∞", "–ö“Ø–Ω –∂—ã–ª—ã"], c: 0},
        {q: "“ö–æ—Å —Å”©–∑–¥—ñ —Ç–∞–ø:", a: ["–ö”©—Ä—à—ñ-“õ–æ–ª–∞“£", "–ë–µ–ª–±–µ—É", "–ê“õ“õ“±–±–∞", "–°–∞—Ä—ã–∞—Ä“õ–∞"], c: 0},
        {q: "“ö—ã—Å“õ–∞—Ä“ì–∞–Ω —Å”©–∑–¥—ñ —Ç–∞–ø:", a: ["“ö–†", "–ú–µ–º–ª–µ–∫–µ—Ç", "–ó–∞“£", "–û“õ—É—à—ã"], c: 0},
        {q: "–ó–∞—Ç –µ—Å—ñ–º–Ω—ñ“£ —Å“±—Ä–∞“õ—Ç–∞—Ä—ã:", a: ["–ö—ñ–º? –ù–µ?", "“ö–∞–Ω–¥–∞–π?", "–ù–µ —ñ—Å—Ç–µ–¥—ñ?", "“ö–∞–ª–∞–π?"], c: 0},
        {q: "–ï—Ç—ñ—Å—Ç—ñ–∫ –Ω–µ–Ω—ñ –±—ñ–ª–¥—ñ—Ä–µ–¥—ñ?", a: ["–ó–∞—Ç—Ç—ã“£ “õ–∏–º—ã–ª—ã–Ω", "–ó–∞—Ç—Ç—ã“£ –∞—Ç—ã–Ω", "–ó–∞—Ç—Ç—ã“£ —Å–∞–Ω—ã–Ω", "–ó–∞—Ç—Ç—ã“£ —Å—ã–Ω—ã–Ω"], c: 0},
        {q: "–°–∞–Ω –µ—Å—ñ–º–Ω—ñ“£ —Ç“Ø—Ä–ª–µ—Ä—ñ –Ω–µ—à–µ—É?", a: ["6", "5", "4", "7"], c: 0},
        {q: "–°—ã–Ω –µ—Å—ñ–º–Ω—ñ“£ —à—ã—Ä–∞–π–ª–∞—Ä—ã:", a: ["2", "3", "4", "5"], c: 0},
        {q: "–ï—Å—ñ–º–¥—ñ–∫—Ç—ñ —Ç–∞–ø:", a: ["–ú–µ–Ω", "–û“õ—É", "–ñ–∞–∑—É", "–ö—ñ—Ç–∞–ø"], c: 0},
        {q: "–®—ã–ª–∞—É —Å”©–∑–¥—ñ —Ç–∞–ø:", a: ["“Æ—à—ñ–Ω", "–ö–µ–ª–¥—ñ", "”ò–¥–µ–º—ñ", "“Æ–π"], c: 0},
        {q: "–û–¥–∞“ì–∞–π–¥—ã“£ —Ç“Ø—Ä–ª–µ—Ä—ñ:", a: ["–ö”©“£—ñ–ª-–∫“Ø–π, —à–∞“õ—ã—Ä—É, –∂–µ–∫—ñ—Ä—É", "–°–∞–ø–∞–ª—ã“õ, “õ–∞—Ç—ã—Å—Ç—ã“õ", "–î–∞—Ä–∞, –∫“Ø—Ä–¥–µ–ª—ñ", "–ù–µ–≥—ñ–∑–≥—ñ, —Ç—É—ã–Ω–¥—ã"], c: 0},
        {q: "–ï–ª—ñ–∫—Ç–µ—É —Å”©–∑–¥—ñ —Ç–∞–ø:", a: ["–ñ–∞—Ä“õ-–∂“±—Ä“õ", "–ë–∞–ª–∞-—à–∞“ì–∞", "–ê–ª–∞—Å–∞", "–ö“Ø–ª—É"], c: 0},
        {q: "–°”©–π–ª–µ–º–Ω—ñ“£ –±—ñ—Ä—ã“£“ì–∞–π –º“Ø—à–µ–ª–µ—Ä—ñ–Ω—ñ“£ –∞—Ä–∞—Å—ã–Ω–∞ –Ω–µ “õ–æ–π—ã–ª–∞–¥—ã?", a: ["“Æ—Ç—ñ—Ä", "–ù“Ø–∫—Ç–µ", "–°“±—Ä–∞“õ –±–µ–ª–≥—ñ—Å—ñ", "–õ–µ–ø –±–µ–ª–≥—ñ—Å—ñ"], c: 0},
        {q: "–ú”ô—Ç—ñ–Ω–Ω—ñ“£ —Ç–∞“õ—ã—Ä—ã–±—ã –¥–µ–≥–µ–Ω –Ω–µ?", a: ["–ù–µ —Ç—É—Ä–∞–ª—ã –∞–π—Ç—ã–ª“ì–∞–Ω—ã", "–ú”ô—Ç—ñ–Ω–Ω—ñ“£ –º–∞–∑–º“±–Ω—ã", "“ö–æ—Ä—ã—Ç—ã–Ω–¥—ã—Å—ã", "–ë–∞—Å—ã"], c: 0}
    ];

    // –û–π—ã–Ω –∞–π–Ω—ã–º–∞–ª—ã–ª–∞—Ä—ã
    let gameQuestions = [];
    let currentIdx = 0;
    let userAnswers = new Array(40).fill(null); // –ü–∞–π–¥–∞–ª–∞–Ω—É—à—ã–Ω—ã“£ —Ç–∞“£–¥–∞“ì–∞–Ω –∂–∞—É–∞–ø—Ç–∞—Ä—ã (–∏–Ω–¥–µ–∫—Å—Ç–µ—Ä—ñ)
    let userName = "";
    let coins = localStorage.getItem('schoolCoins') ? parseInt(localStorage.getItem('schoolCoins')) : 0;

    document.getElementById("total-coins").innerText = coins;

    // –§—É–Ω–∫—Ü–∏—è: –≠–∫—Ä–∞–Ω–¥—ã –∞—É—ã—Å—Ç—ã—Ä—É
    function showScreen(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }

    function showLogin() {
        showScreen('login-screen');
    }

    // –§—É–Ω–∫—Ü–∏—è: –ú–∞—Å—Å–∏–≤—Ç—ñ –∞—Ä–∞–ª–∞—Å—Ç—ã—Ä—É (Fisher-Yates shuffle)
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    // –û–π—ã–Ω–¥—ã –±–∞—Å—Ç–∞—É –∂”ô–Ω–µ —Å“±—Ä–∞“õ—Ç–∞—Ä–¥—ã –¥–∞–π—ã–Ω–¥–∞—É
    function startGame() {
        const nameInput = document.getElementById("username");
        if (!nameInput.value.trim()) {
            alert("–ï—Å—ñ–º—ñ“£—ñ–∑–¥—ñ –∂–∞–∑—ã“£—ã–∑!");
            return;
        }
        userName = nameInput.value;

        // –°“±—Ä–∞“õ—Ç–∞—Ä–¥—ã ”©“£–¥–µ—É: –ñ–∞—É–∞–ø –Ω“±—Å“õ–∞–ª–∞—Ä—ã–Ω –∞—Ä–∞–ª–∞—Å—Ç—ã—Ä—É
        gameQuestions = rawQuestions.map(q => {
            // –î“±—Ä—ã—Å –∂–∞—É–∞–ø—Ç—ã“£ –º”ô—Ç—ñ–Ω—ñ–Ω —Å–∞“õ—Ç–∞–ø –∞–ª–∞–º—ã–∑
            let correctText = q.a[q.c];
            // –ñ–∞—É–∞–ø—Ç–∞—Ä–¥—ã“£ –∫”©—à—ñ—Ä–º–µ—Å—ñ–Ω –∂–∞—Å–∞–ø, –∞—Ä–∞–ª–∞—Å—Ç—ã—Ä–∞–º—ã–∑
            let shuffledOptions = shuffleArray([...q.a]);
            // –ê—Ä–∞–ª–∞—Å“õ–∞–Ω –º–∞—Å—Å–∏–≤—Ç–µ–≥—ñ –¥“±—Ä—ã—Å –∂–∞—É–∞–ø—Ç—ã“£ –∂–∞“£–∞ –∏–Ω–¥–µ–∫—Å—ñ–Ω —Ç–∞–±–∞–º—ã–∑
            let newCorrectIndex = shuffledOptions.indexOf(correctText);
            
            return {
                q: q.q,
                a: shuffledOptions,
                c: newCorrectIndex
            };
        });

        // –°“±—Ä–∞“õ—Ç–∞—Ä–¥—ã“£ ”©–∑–¥–µ—Ä—ñ–Ω –¥–µ –∞—Ä–∞–ª–∞—Å—Ç—ã—Ä—É“ì–∞ –±–æ–ª–∞–¥—ã (“õ–∞–ª–∞—Å–∞“£—ã–∑)
        // gameQuestions = shuffleArray(gameQuestions);

        showScreen('game-screen');
        renderQuestion();
    }

    // –°“±—Ä–∞“õ—Ç—ã —ç–∫—Ä–∞–Ω“ì–∞ —à—ã“ì–∞—Ä—É
    function renderQuestion() {
        const q = gameQuestions[currentIdx];
        document.getElementById("q-number").innerText = currentIdx + 1;
        document.getElementById("q-text").innerText = q.q;

        const optionsHtml = document.getElementById("options-area");
        optionsHtml.innerHTML = "";

        q.a.forEach((opt, index) => {
            const btn = document.createElement("div");
            btn.className = "option-btn";
            if (userAnswers[currentIdx] === index) {
                btn.classList.add("selected");
            }
            btn.innerText = opt; // A, B, C ”ô—Ä—ñ–ø—Ç–µ—Ä—ñ–Ω –∞–ª—ã–ø —Ç–∞—Å—Ç–∞–¥—ã“õ, —Ç–µ–∫ –º”ô—Ç—ñ–Ω “õ–∞–ª–∞–¥—ã –Ω–µ–º–µ—Å–µ CSS –∞—Ä“õ—ã–ª—ã “õ–æ—Å—É“ì–∞ –±–æ–ª–∞–¥—ã
            btn.onclick = () => selectOption(index);
            optionsHtml.appendChild(btn);
        });

        // –ë–∞—Ç—ã—Ä–º–∞–ª–∞—Ä–¥—ã –±–∞—Å“õ–∞—Ä—É
        document.getElementById("prev-btn").disabled = (currentIdx === 0);
        
        if (currentIdx === gameQuestions.length - 1) {
            document.getElementById("next-btn").style.display = "none";
            document.getElementById("finish-btn").style.display = "inline-block";
        } else {
            document.getElementById("next-btn").style.display = "inline-block";
            document.getElementById("finish-btn").style.display = "none";
        }
    }

    // –ñ–∞—É–∞–ø—Ç—ã —Ç–∞“£–¥–∞—É
    function selectOption(index) {
        userAnswers[currentIdx] = index;
        renderQuestion(); // “ö–∞–π—Ç–∞ —Å—ã–∑—É (—Ç“Ø—Å—ñ–Ω ”©–∑–≥–µ—Ä—Ç—É “Ø—à—ñ–Ω)
    }

    // –ö–µ–ª–µ—Å—ñ —Å“±—Ä–∞“õ
    function nextQuestion() {
        if (currentIdx < gameQuestions.length - 1) {
            currentIdx++;
            renderQuestion();
        }
    }

    // –ê–ª–¥—ã“£“ì—ã —Å“±—Ä–∞“õ
    function prevQuestion() {
        if (currentIdx > 0) {
            currentIdx--;
            renderQuestion();
        }
    }

    // –¢–µ—Å—Ç—Ç—ñ –∞—è“õ—Ç–∞—É –∂”ô–Ω–µ –µ—Å–µ–ø—Ç–µ—É
    function finishTest() {
        // –ë–∞—Ä–ª—ã“õ —Å“±—Ä–∞“õ“õ–∞ –∂–∞—É–∞–ø –±–µ—Ä—ñ–ª–≥–µ–Ω—ñ–Ω —Ç–µ–∫—Å–µ—Ä—É (–º—ñ–Ω–¥–µ—Ç—Ç—ñ –µ–º–µ—Å, –±—ñ—Ä–∞“õ –¥“±—Ä—ã—Å –±–æ–ª–∞–¥—ã)
        let unanswered = userAnswers.filter(a => a === null).length;
        if (unanswered > 0) {
            if (!confirm(`–°—ñ–∑ ${unanswered} —Å“±—Ä–∞“õ“õ–∞ –∂–∞—É–∞–ø –±–µ—Ä–º–µ–¥—ñ“£—ñ–∑. –ê—è“õ—Ç–∞–π –±–µ—Ä–µ—Å—ñ–∑ –±–µ?`)) return;
        }

        let score = 0;
        let mistakes = [];

        for (let i = 0; i < gameQuestions.length; i++) {
            if (userAnswers[i] === gameQuestions[i].c) {
                score++;
            } else {
                mistakes.push({
                    q: gameQuestions[i].q,
                    correct: gameQuestions[i].a[gameQuestions[i].c]
                });
            }
        }

        showResults(score, mistakes);
    }

    function showResults(score, mistakes) {
        showScreen('result-screen');
        document.getElementById("player-name").innerText = userName;
        document.getElementById("score").innerText = score;

        const msgBox = document.getElementById("motivation-msg");
        let reward = 0;

        // –õ–æ–≥–∏–∫–∞ –∂”ô–Ω–µ –ú–æ—Ç–∏–≤–∞—Ü–∏—è
        if (score <= 25) {
            msgBox.innerHTML = `
                <div class="quote-box">
                    "–¢–∞–ª–∞–ø—Ç—ã“£ –º—ñ–Ω—ñ–ø —Ç“±–ª–ø–∞—Ä—ã–Ω,<br>
                    –¢–∞—Å “õ–∏—è“ì–∞ ”©—Ä–ª–µ“£—ñ–∑.<br>
                    –ë—ñ–ª—ñ–º–Ω—ñ“£ –∞—à—ã–ø —Å–∞—Ä–∞–π—ã–Ω,<br>
                    –ë–æ–ª–∞—à–∞“õ—Ç—ã –∫”©—Ä–≥–µ–Ω—ñ–∑!" <br>
                    ‚Äî <b>–ê—Ö–º–µ—Ç –Æ–≥–Ω–∞–∫–∏</b> (–Ω–µ–º–µ—Å–µ –ê–±–∞–π/–´–±—ã—Ä–∞–π)
                </div>
                <h3 style="color: #e17055;">–ï—à –º“±“£–∞–π–º–∞!</h3>
                <p>–ë“±–ª —Ç–µ–∫ —Å—ã–Ω–∞“õ “õ–∞–Ω–∞. –°–µ–Ω—ñ“£ “õ–æ–ª—ã“£–Ω–∞–Ω –±”ô—Ä—ñ –∫–µ–ª–µ–¥—ñ. –¢–∞“ì—ã –±—ñ—Ä —Ä–µ—Ç “õ–∞–π—Ç–∞–ª–∞–ø –∫”©—Ä—Å–µ“£, –º—ñ–Ω–¥–µ—Ç—Ç—ñ —Ç“Ø—Ä–¥–µ –∂–µ“£–µ—Å—ñ“£! üí™</p>
            `;
            reward = 15;
        } else if (score <= 35) {
            msgBox.innerHTML = `
                <h3 style="color: #0984e3;">–ñ–∞—Ä–∞–π—Å—ã“£! ”®—Ç–µ –∂–∞“õ—Å—ã –Ω”ô—Ç–∏–∂–µ! üëç</h3>
                <p>–°–µ–Ω —Ç–∞“õ—ã—Ä—ã–ø—Ç—ã –∂–∞“õ—Å—ã —Ç“Ø—Å—ñ–Ω—ñ–ø—Å—ñ“£.</p>
            `;
            reward = 25;
        } else {
            msgBox.innerHTML = `
                <h3 style="color: #00b894;">–ö–µ—Ä–µ–º–µ—Ç! –ù–∞“ì—ã–∑ “Ø–∑–¥—ñ–∫! üåü</h3>
                <p>–°–µ–Ω –±–∞—Ä–ª—ã“õ —Ç–∞“õ—ã—Ä—ã–ø—Ç—ã —Ç–æ–ª—ã“õ –º–µ“£–≥–µ—Ä—ñ–ø—Å—ñ“£!</p>
            `;
            reward = 40;
        }

        // –¢–∏—ã–Ω–¥–∞—Ä–¥—ã “õ–æ—Å—É
        coins += reward;
        localStorage.setItem('schoolCoins', coins);
        document.getElementById("total-coins").innerText = coins;

        // “ö–∞—Ç–µ–ª–µ—Ä–¥—ñ –∫”©—Ä—Å–µ—Ç—É
        const mistakesContainer = document.getElementById("mistakes-container");
        const list = document.getElementById("mistakes-list");
        if (mistakes.length > 0) {
            mistakesContainer.style.display = "block";
            list.innerHTML = "";
            mistakes.forEach(m => {
                list.innerHTML += `<div class="mistake-item"><b>–°“±—Ä–∞“õ:</b> ${m.q}<br><span style="color:green">–î“±—Ä—ã—Å –∂–∞—É–∞–ø: ${m.correct}</span></div>`;
            });
        }
    }
</script>

</body>

</html>
